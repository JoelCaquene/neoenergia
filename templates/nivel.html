{% extends "base.html" %}
{% load static %}

{% block title %}N√≠veis de Investimento - Plataforma{% endblock %}

{% block content %}
<div class="container my-5 custom-container">
    <div class="page-header-custom">
        <h1>üìà N√çVEIS DE INVESTIMENTO</h1>
    </div>
    
    <div class="level-list row justify-content-center">
        {% for level in levels %}
        <div class="col-sm-6 col-lg-4 mb-4 level-card-col">
            <div class="level-item {% if level.id in user_levels %}active-border{% endif %}">
                
                {# 1. √çCONE E T√çTULO MODERNOS (Organiza√ß√£o compacta) #}
                <div class="level-header">
                    <div class="level-icon-wrapper">
                        {# √çcones e cores inspirados no material design, baseados no ID #}
                        {% if level.id == 1 %}
                            <i class="fas fa-bolt" style="color: #ffffff; background-color: #5d5dff;"></i> {# Raio Azul #}
                        {% elif level.id == 2 %}
                            <i class="fas fa-hand-holding-box" style="color: #ffffff; background-color: #00b894;"></i> {# Caixa Verde #}
                        {% elif level.id == 3 %}
                            <i class="fas fa-fire-alt" style="color: #ffffff; background-color: #ff7675;"></i> {# Fogo Vermelho #}
                        {% elif level.id == 4 %}
                            <i class="fas fa-shield-alt" style="color: #ffffff; background-color: #fdcb6e;"></i> {# Escudo Amarelo #}
                        {% elif level.id == 5 %}
                            <i class="fas fa-rocket" style="color: #ffffff; background-color: #a29bfe;"></i> {# Foguete Roxo #}
                        {% else %}
                            <i class="fas fa-layer-group" style="color: #ffffff; background-color: #dfe6e9;"></i>
                        {% endif %}
                    </div>
                    <div class="title-details">
                        <h3 class="level-title">N√çVEL {{ level.id }}</h3>
                        <p class="level-plan-days">
                            <span class="plan-name">{{ level.name }}</span> ‚Ä¢ {{ level.cycle_days }} dias
                        </p>
                    </div>
                </div>
                
                {# 2. GRADE DE INDICADORES COMPACTA #}
                <div class="level-indicators-grid">
                    
                    {# 2.1. INDICADOR DI√ÅRIO #}
                    <div class="indicator-box daily-box">
                        <span class="indicator-label">Di√°rio</span>
                        <strong class="indicator-value">KZ {{ level.daily_gain }}</strong>
                    </div>

                    {# 2.2. INDICADOR MENSAL (Total) - Destaque #}
                    <div class="indicator-box monthly-box">
                        <span class="indicator-label">Mensal</span>
                        <strong class="indicator-value total-value">KZ {{ level.monthly_gain }}</strong> 
                    </div>

                    {# 2.3. INDICADOR DE INVESTIMENTO (Dep√≥sito) #}
                    <div class="indicator-box invest-box">
                        <span class="indicator-label">Investir</span>
                        <strong class="indicator-value">KZ {{ level.deposit_value }}</strong>
                    </div>

                </div>
                
                {# 3. L√ìGICA DE INTERA√á√ÉO COM DJANGO MANTIDA #}
                {% if level.id in user_levels %}
                    <span class="active-level pulse-effect">N√≠vel Ativo</span>
                {% else %}
                    <form method="post" action="{% url 'nivel' %}">
                        {% csrf_token %}
                        <input type="hidden" name="level_id" value="{{ level.id }}">
                        <button type="submit" class="buy-button hover-effect">Investir Agora</button>
                    </form>
                {% endif %}
                
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<style>
    /* üé® Cores e Estilos Globais */
    :root {
        --primary-gradient: linear-gradient(45deg, #6c5ce7, #0984e3);
        --primary-color: #0984e3; /* Azul prim√°rio */
        --success-green: #2ecc71; 
        --light-gray: #f8f9fa;
        --card-bg: #ffffff;
        --dark-text: #34495e;
        --monthly-highlight: #28a745; /* Cor verde para destacar o Mensal */
    }

    body {
        background-color: var(--light-gray); 
        font-family: 'Inter', sans-serif;
    }

    /* üìå Cabe√ßalho */
    .page-header-custom {
        text-align: center;
        padding: 20px 15px;
        background-color: var(--card-bg);
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.05);
        margin-bottom: 30px;
        border-left: 5px solid var(--primary-color);
    }
    .page-header-custom h1 {
        color: var(--dark-text);
        font-weight: 800;
        font-size: 1.8rem;
    }

    /* üß± Cards de N√≠vel */
    .custom-container {
        max-width: 1200px; 
        padding: 0 15px;
    }
    
    /* Configura√ß√£o de Colunas (padr√£o Bootstrap 4/5) */
    @media (min-width: 768px) { .col-sm-6 { flex: 0 0 50%; max-width: 50%; } }
    @media (min-width: 992px) { .col-lg-4 { flex: 0 0 33.333333%; max-width: 33.333333%; } }
    @media (min-width: 1200px) { .col-lg-4 { /* Em ecr√£s super grandes, ainda 3 por linha */ } }


    .level-item {
        background: var(--card-bg);
        padding: 20px;
        border-radius: 15px; 
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);
        transition: transform 0.3s ease, box-shadow 0.3s ease, border 0.3s ease;
        height: 100%;
        display: flex;
        flex-direction: column;
        border: 1px solid #e0e0e0;
    }

    .level-item:hover {
        transform: translateY(-5px);
        box-shadow: 0 12px 25px rgba(0, 0, 0, 0.15);
    }

    .active-border {
        border: 3px solid var(--success-green) !important;
        box-shadow: 0 0 15px rgba(46, 204, 113, 0.4);
    }
    
    /* 1. CABE√áALHO DO N√çVEL (√çcone e T√≠tulo) */
    .level-header {
        display: flex;
        align-items: center;
        margin-bottom: 15px; /* Mais compacto */
        padding-bottom: 10px;
        border-bottom: 1px solid #f0f0f0;
    }

    .level-icon-wrapper {
        width: 45px; /* Menor */
        height: 45px; /* Menor */
        border-radius: 10px; /* Mais quadrado */
        display: flex;
        align-items: center;
        justify-content: center;
        margin-right: 15px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
    }
    .level-icon-wrapper i {
        font-size: 1.3rem;
    }

    .title-details {
        text-align: left;
    }

    .level-title {
        color: var(--dark-text);
        font-weight: 800;
        margin: 0;
        font-size: 1.2rem;
    }

    .level-plan-days {
        font-size: 0.8rem; /* Menor */
        color: #7f8c8d;
        margin: 0;
        line-height: 1.2;
    }
    .plan-name {
        font-weight: 600;
        color: var(--dark-text);
    }

    /* 2. GRADE DE INDICADORES (Ajustada para ser Compacta) */
    .level-indicators-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr); 
        gap: 8px; /* Espa√ßo reduzido */
        margin-bottom: 25px;
    }

    .indicator-box {
        background-color: var(--light-gray);
        border: 1px solid #dcdcdc;
        border-radius: 8px; /* Mais arredondado */
        padding: 8px 5px; /* Padding reduzido para compactar */
        text-align: center;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        min-height: 70px; /* Altura m√≠nima reduzida */
    }

    .indicator-label {
        font-size: 0.75rem; /* Menor */
        font-weight: 600;
        color: #7f8c8d;
        margin-bottom: 2px;
        text-transform: uppercase;
    }
    .indicator-value {
        font-size: 0.95rem; /* Menor */
        font-weight: 800;
        color: var(--dark-text);
        line-height: 1.1;
    }

    /* Destaque para o campo MENSAL */
    .monthly-box {
        background-color: rgba(40, 167, 69, 0.1); /* Fundo verde claro */
        border-color: var(--monthly-highlight);
    }
    .monthly-box .indicator-value {
        color: var(--monthly-highlight);
        font-size: 1.05rem; /* Um pouco maior que os outros */
    }
    
    /* Estilo do Bot√£o Investir Agora */
    .buy-button {
        background: var(--primary-gradient);
        color: white;
        padding: 12px;
        border-radius: 8px;
        font-size: 1.1rem;
        font-weight: 700;
        text-transform: uppercase;
        border: none;
        cursor: pointer;
        width: 100%;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        transition: all 0.2s ease;
        margin-top: auto;
    }

    .buy-button.hover-effect:hover {
        opacity: 0.9;
        transform: translateY(-2px);
        box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
    }

    .active-level {
        background-color: var(--success-green);
        color: white;
        padding: 12px;
        border-radius: 8px;
        font-size: 1.1rem;
        font-weight: 700;
        text-transform: uppercase;
        text-align: center;
        margin-top: auto;
        animation: pulse 1.5s infinite; 
    }
    
    /* Anima√ß√£o */
    @keyframes pulse {
        0% { transform: scale(1); opacity: 1; }
        50% { transform: scale(1.02); opacity: 0.95; }
        100% { transform: scale(1); opacity: 1; }
    }

    /* üì± Responsividade */
    @media (max-width: 576px) {
        .col-sm-6 {
            flex: 0 0 100%; /* 1 card por linha em mobile */
            max-width: 100%;
        }
    }
</style>
{% endblock %}
